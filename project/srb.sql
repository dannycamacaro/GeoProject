-- MYSQL SCRIPT GENERATED BY MYSQL WORKBENCH
-- 10/08/18 23:53:39
-- MODEL: NEW MODEL    VERSION: 1.0
-- MYSQL WORKBENCH FORWARD ENGINEERING

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- SCHEMA SRB
-- -----------------------------------------------------

-- -----------------------------------------------------
-- SCHEMA SRB
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS SRB DEFAULT CHARACTER SET UTF8 ;
USE SRB ;

-- -----------------------------------------------------
-- TABLE SRB.ROLES
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SRB.ROLES` ;

CREATE TABLE IF NOT EXISTS SRB.ROLES (
  IDROL INT NOT NULL,
  NAMEROLE VARCHAR(45) NULL,
  DESCRIPTIONROLE VARCHAR(400) NULL,
  PRIMARY KEY (IDROL))
ENGINE = INNODB;

-- -----------------------------------------------------
-- TABLE SRB.USERS
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SRB.USERS` ;

CREATE TABLE IF NOT EXISTS SRB.USERS (
  IDUSERS INT NOT NULL,
  USERNAME VARCHAR(100) NULL,
  PASSWORD2 VARCHAR(45) NULL,
  FIRSTNAME VARCHAR(100) NULL,
  LASTNAME VARCHAR(45) NULL,
  IDENTITYDOCUMENT VARCHAR(45) NULL,
  AGE INT NULL,
  PHONENUMBER VARCHAR(45) NULL,
  EMAIL VARCHAR(200) NULL,
  IDROL INT NOT NULL,
  IDASSIGNEDVEHICLE INT NOT NULL,
  PRIMARY KEY (IDUSERS),
FOREIGN KEY FK_ROL(IDROL)
   REFERENCES ROLES(IDROL)
   ON UPDATE CASCADE
   ON DELETE CASCADE)
ENGINE = INNODB;

-- -----------------------------------------------------
-- TABLE SRB.VEHICLE
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SRB.VEHICLE` ;

CREATE TABLE IF NOT EXISTS SRB.VEHICLE (
  IDVEHICLE INT(11) NOT NULL,
  MARK VARCHAR(45) NULL DEFAULT NULL,
  LICENSEPLATE VARCHAR(45) NULL DEFAULT NULL,
  VEHICLEYEAR INT NULL DEFAULT NULL,
  TON INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (IDVEHICLE))
ENGINE = INNODB;
-- -----------------------------------------------------
-- TABLE SRB.ASSIGNEDVEHICLE
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SRB.ASSIGNEDVEHICLE` ;

CREATE TABLE IF NOT EXISTS SRB.ASSIGNEDVEHICLE (
  IDASSIGNEDVEHICLE INT(11) NOT NULL,
  IDUSERS INT NOT NULL,
  IDVEHICLE INT(11) NOT NULL,
  INITIALDATE DATE NULL,
  FINISHDATE DATE NULL,
  PRIMARY KEY (IDASSIGNEDVEHICLE),
  CONSTRAINT 
    FOREIGN KEY (IDUSERS)
    REFERENCES USERS (IDUSERS)
   ON UPDATE CASCADE
   ON DELETE CASCADE,
  CONSTRAINT 
    FOREIGN KEY (IDVEHICLE)
    REFERENCES VEHICLE (IDVEHICLE)
    ON UPDATE CASCADE
   ON DELETE CASCADE)
ENGINE = INNODB;
-- -----------------------------------------------------
-- TABLE SRB.AUDITS
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SRB.AUDITS` ;

CREATE TABLE IF NOT EXISTS SRB.AUDITS (
  IDAUDITS INT NOT NULL,
  IDUSERS INT NOT NULL,
  TYPEOPERATION VARCHAR(45) NULL,
  IP VARCHAR(45) NULL,
  AUDITSDATE DATE NULL,
  TIMEAUDIT TIME NULL,
  STATUSOPERATION INT NULL,
  CONTENT VARCHAR(3000) NULL,
  PRIMARY KEY (IDAUDITS),
  CONSTRAINT 
    FOREIGN KEY (IDUSERS)
    REFERENCES USERS (IDUSERS)
     ON UPDATE CASCADE
   ON DELETE CASCADE)
ENGINE = INNODB;
-- -----------------------------------------------------
-- TABLE `SRB`.`LOCATION`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SRB`.`LOCATION` ;

CREATE TABLE IF NOT EXISTS SRB.LOCATION (
  `IDLOCATION` INT(11) NOT NULL,
  `IDVEHICLE` INT(11) NULL DEFAULT NULL,
  `LOCATIONLATITUDE` VARCHAR(100) NULL DEFAULT NULL,
  `LOCATIONLENGTH` VARCHAR(100) NULL DEFAULT NULL,
  `LOCATIONDATE` DATE NULL DEFAULT NULL,
  PRIMARY KEY (`IDLOCATION`),
  CONSTRAINT 
    FOREIGN KEY (IDVEHICLE)
    REFERENCES VEHICLE (IDVEHICLE)
     ON UPDATE CASCADE
   ON DELETE CASCADE)
ENGINE = INNODB;
-- -----------------------------------------------------
-- TABLE `SRB`.`DEVICE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SRB`.`DEVICE` ;

CREATE TABLE IF NOT EXISTS SRB.DEVICE (
  `IDDEVICE` INT(11) NOT NULL,
  `IDVEHICLE` INT(11) NOT NULL,
  `MARK` VARCHAR(150) NULL DEFAULT NULL,
  `MODEL` VARCHAR(150) NULL DEFAULT NULL,
  `IMEI` VARCHAR(100) NULL DEFAULT NULL,
  `PHONENUMBER` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`IDDEVICE`),
 CONSTRAINT 
    FOREIGN KEY (IDVEHICLE)
    REFERENCES VEHICLE (IDVEHICLE)
     ON UPDATE CASCADE
   ON DELETE CASCADE)
ENGINE = INNODB;
-- -----------------------------------------------------
-- TABLE `SRB`.`ROUTES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SRB`.`ROUTES` ;

CREATE TABLE IF NOT EXISTS `SRB`.`ROUTES` (
  `IDROUTES` INT(11) NOT NULL,
  `NAMEROUTES` VARCHAR(100) ,
  `DESCRIPTION` VARCHAR(400) ,
  PRIMARY KEY (`IDROUTES`))
ENGINE = INNODB;

-- -----------------------------------------------------
-- TABLE `SRB`.`ASSIGNEDROUTES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SRB`.`ASSIGNEDROUTES` ;

CREATE TABLE IF NOT EXISTS `SRB`.`ASSIGNEDROUTES` (
  `IDASSIGNEDROUTES` INT(11) NOT NULL,
  `IDDEVICE` INT(11) NOT NULL,
  `IDROUTES` INT NOT NULL,
  PRIMARY KEY (`IDASSIGNEDROUTES`),
  CONSTRAINT 
    FOREIGN KEY (IDDEVICE)
    REFERENCES DEVICE (IDDEVICE)
     ON UPDATE CASCADE
   ON DELETE CASCADE,
   CONSTRAINT 
    FOREIGN KEY (IDROUTES)
    REFERENCES ROUTES (IDROUTES)
     ON UPDATE CASCADE
   ON DELETE CASCADE)
ENGINE = INNODB;

-- -----------------------------------------------------
-- TABLE `SRB`.`ROUTEDETAIL`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SRB`.`ROUTEDETAIL` ;

CREATE TABLE IF NOT EXISTS `SRB`.`ROUTEDETAIL` (
  `IDROUTEDETAIL` INT(11) NOT NULL,
  `IDROUTES` INT(11) NULL DEFAULT NULL,
  `ROUTELATITUDE` VARCHAR(200) NULL DEFAULT NULL,
  `ROUTELENGTH` VARCHAR(200) NULL DEFAULT NULL,
  `DESCRIPTION` VARCHAR(150)  NULL DEFAULT NULL,
  PRIMARY KEY (`IDROUTEDETAIL`),
  CONSTRAINT 
    FOREIGN KEY (IDROUTES)
    REFERENCES ROUTES (IDROUTES)
     ON UPDATE CASCADE
   ON DELETE CASCADE)
ENGINE = INNODB;


